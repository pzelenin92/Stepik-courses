
>[!info]
>Урок с сайта youngcoder
>[Урок 3](https://youngcoder.ru/lessons/3/formatnyi_vyvod_printf.php)


В первом уроке мы научились выводить на экран произвольную строчку. Но это самое простое, что может сделать функция printf. Давайте теперь подробнее разберемся, как она устроена и как работает.

Общий синтаксис функции printf следующий:
![[13. Computer Science/00.Attachements/bbf92689b1d63944899fc1308e303af5_MD5.jpeg]]
Рис.1. Общий синтаксис функции printf.

У функции printf есть один обязательный параметр – строка, заключенная в двойные кавычки. Эту строку еще называют формат-строкой.

Напоминаю, что параметрами называется то, что мы записываем рядом с именем функции в круглых скобках.

Кроме обязательной строки форматирования есть и необязательные параметры. Они пишутся через запятую после формат-строки.

## Формат-строка.

Любой символ в формат-строке относится к одной из следующих групп:

-   символы, которые выводятся на экран без изменений
-   escape-последовательности
-   спецификаторы формата

## Еscape-последовательности

С этой группой символов мы уже встречались в первом уроке. Символ \\n. Он, как вы наверное помните, переносит выводимый текст на новую строку. Есть и другие эскейп-последовательности (иногда можно встретить название управляющие последовательности). Любая такая последовательность начинается с символа обратный слеш \\.


>[!Часто используемые escape-последовательности:]
**\\n**     - новая строка  
**\\t**     - горизонтальная табуляция. Сдвигает выводимые данные вправо на ближайшую позицию табуляции. Обычно используется для выравнивания текста внутри строки.  
**\\'**     - вывод символа '  
**\\"**     - вывод символа "  
**\\\\**     - вывод символа \\  

Как видите, последние три последовательности нужны лишь для того, чтобы вывести на экран символы «"», «'» и «\\». Дело в том, что если эти символы просто записать в формат-строку, то они не отобразятся на экране, а в некоторых случаях программа и вовсе не скомпилируется.

Интерес представляет символ ?. Вообще говоря, для него также имеется escape-последовательность \\?. При этом, вывести данный символ можно и без добавления обратного слеша.

Следующая программа иллюстрирует работу escape-последовательностей.

Листинг 1.
```C
#include <stdio.h> 
int main(void){
	printf("What is your name\\?\\n\\tMy name\\'s Bond! James Bond!\\n");
	return 0;
}
```


Хотя escape-последовательности состоят из нескольких символов, но в потоке вывода они воспринимаются как цельный символ, который имеет своё собственное значение.

Итого, используя управляющие последовательности мы можем влиять на то, как данные будут выводиться на экране.

## Спецификаторы формата.

Спецификаторы формата всегда начинаются с символа %, и предназначены для вывода на экран значений переменных и выражений.

Для каждого типа данных есть свой спецификатор формата. Ниже записаны основные из них.

>[!Основные спецификаторы формата:]
**%d, %i**  - целые числа  
**%f, %g**  - вещественные числа  
**%c**         - символы  

Есть и другие спецификаторы формата. Мы познакомимся с ними тогда, когда они нам понадобятся.

Сами спецификаторы формата на экран не выводятся. Вместо них выводятся данные, которые передаются в функцию printf после строки форматирования.

Функция printf работает следующим образом. Все символы, заключенные в двойные кавычки, кроме управляющих последовательностей и спецификаторов формата, выводятся на экран. Спецификаторы формата во время вывода заменяются на значения, указанные после формат-строки. Причем, если используется несколько спецификаторов формата, то первый спецификатор заменяется на первое значение, расположенное после формат строки, второй – на второе, и т.д.

Посмотрим на примерах.

Листинг 2.
```C
printf("%d\\t%d\\n%d",10,20,30); 
```

![[13. Computer Science/00.Attachements/8288d2b6eb46a6605b95485f1005179b_MD5.jpeg]]
Рис.2 Вывод Листинг 2.

Листинг 3.
```C
printf("pervoe slagaemoe: %d\\nvtoroe slagaemoe:%d\\nsumma: %d\\n",10,20,30); 
```

[[13. Computer Science/00.Attachements/5a6831cfcc587c87eecbf4f9ff4878bc_MD5.jpeg|Open: l3.png]]
![[13. Computer Science/00.Attachements/5a6831cfcc587c87eecbf4f9ff4878bc_MD5.jpeg]]
Рис.3 Вывод Листинг 3.

Листинг 4.
```C
printf("%d + %d = %d\\n", 20, 10, 20+10);
```

[[13. Computer Science/00.Attachements/ee47fdcb6fad2757918cc7e470c17480_MD5.jpeg]]
![[13. Computer Science/00.Attachements/ee47fdcb6fad2757918cc7e470c17480_MD5.jpeg]]
Рис.4 Вывод Листинг 4.

Листинг 5.
```C
printf("%d + %d %c %d\\n", 10, 20, '=', 20+10);
```

![[13. Computer Science/00.Attachements/5fc6d08dd60b857acba9291041733796_MD5.jpeg]]
Рис.5 Вывод Листинг 5.

На следующей картинке показан принцип работы функции printf.

![[13. Computer Science/00.Attachements/e4798e4dc633c71e46e25f91a8270ca4_MD5.jpeg]]
Рис.6 Принцип работы функции printf.

По сути, формат строка задаёт некоторый трафарет(шаблон), в который подставляются данные для вывода, в том порядке, в котором они указаны.

Два основных правила, которые нужно соблюдать при работе с функцией printf:

-   количество спецификаторов формата должно совпадать с количеством данных для вывода
-   спецификаторы формата должны точно соответствовать типам выводимых данных

Пара примеров неправильного использования функции printf.

Листинг 6.
```C
#include <stdio.h> 
int main(void){
	int z \= 4;
	float b \= 5.4;
	printf("%f\\n",z); // нарушено  2 правило
	// переменная z целого типа, а команда форматирования %f  предназначена для // вывода переменных типа float
	printf("%d\\n",z, b); //нарушено 1 правило
	// нет команды форматирования для переменной b.
	return 0;
}
```

Напишем небольшую программу, которая иллюстрирует использование спецификаторов формата.

Листинг 7.
```C
#include <stdio.h> 
int main(void){
  int a \= 25;
  float b \= 23.4;
  double c \= 217.876;
  char d \= 's';
  
  printf("Cheloe %d\\n",a);
  printf("Odin simvol %c\\n",d);
  printf("Vewestvennoe %f %g\\n",b,c);

  return 0;
}
```

## Модификаторы формата.

Обратите внимание, что вещественные числа через спецификатор %f выведены с шестью знаками после запятой. У вас на компьютере может быть выведено как больше, так и меньше знаков. Обычно такая точность не нужна. К счастью, этим можно управлять. Для этого предназначены модификаторы формата.

Модификаторы формата записываются между символом % и буквой используемого типа. На рисунке ниже представлена спецификатор формата с использованием модификатора формата.

![[13. Computer Science/00.Attachements/60077a37d3b3712857af85f49061e9a7_MD5.jpeg]]
Рис.7 Модификатор формата

Первое число обозначает ширину поля, выделяемого для записи числа. Второе число обозначает точность, с которой мы хотим вывести данное вещественное число.

В примере на картинке под вещественное число мы выделяем 8 символов и хотим видеть 3 знака после запятой.

Если указанного в ширине количества позиций нам не хватает для вывода числа, то ширина поля увеличивается автоматически, до минимально-возможного количества позиций.

У первого числа может спереди еще стоять знак минус, например %-8.3f. Этот минус говорит о том, что необходимо выровнять число по левому краю используемой области.

Для иллюстрации описанных возможностей модификаторов формата, напишем небольшую программу.

Листинг 8.
```C
#include <stdio.h> 
int main(void){
  int a\=777; 
// никаких модификаторов нет, //вывод использует минимальную ширину поля
  printf("|%d|\\n", a);
	
// ширина 8 позиций, выравнивание по левому краю     
  printf("|%-8d|\\n", a);
	
// ширина 8 позиций, выравнивание по правому краю    
  printf("|%8d|\\n", a);
	
// число позиций 2, но в числе 777 больше двух цифр // поэтому область расширяется до минимально-возможной ширины
  printf("|%2d|\\n", a);

  float b\=150.5;   
// никаких модификаторов нет, выведет используя минимальную ширину поля
// и стандартную точность 6 знаков
  printf("|%f|\\n", b);
	
// ширина 8 позиций, выравнивание по левому краю, 3 знака после запятой
  printf("|%-8.3f|\\n", b);
	
// ширина 8 позиций, 2 знака после запятой, выравнивание по правому краю    
  printf("|%8.2f|\\n", b);
	
// число позиций 4,точность 3 знака после запятой, но этого мало
// поэтому ширина поля увеличивается до минимально-возможного значения
  printf("|%4.3f|\\n", b);
	return 0;
}
```

Результат работы данной программы представлен на рисунке ниже.
[[13. Computer Science/00.Attachements/7c789ec7f725430889ab1615a2bdcc87_MD5.jpeg]]
![[13. Computer Science/00.Attachements/7c789ec7f725430889ab1615a2bdcc87_MD5.jpeg]]
Рис.8 Вывод Листинг 8.

Я специально поставил вокруг каждого числа прямые черточки, что можно было увидеть, что означает ширина поля для вывода и как работает выравнивание по левому краю.

В этом шаге вы познакомились только с самыми основными возможностями функции printf. Но даже этих возможностей вполне хватит, чтобы данные, которые выводит ваша программа выглядели презентабельно.

Да, чуть не забыл. Мы решили одну из задач, которая стояла перед нами в начале урока.

Листинг 9.
```C
#include <stdio.h>
int main(void) {
  int a, b, res;

  a \= 10;
  b \= 7;

  res \= a + b;  
  printf("%d + %d = %d\\n", a, b, res);
  return 0;
}
```

[^1] 

 [^1]: https://youngcoder.ru/lessons/3/formatnyi_vyvod_printf.php  
